
<?php include('header.php'); ?>
<?php include('navbar.php'); ?>

<?php $username = "root";
$password = "wso2123";
$database = "TaskOpenPulls";

$con=mysqli_connect("127.0.0.1", $username , $password,"TaskOpenPulls");


?>

<HEAD><style type="text/css">
a { text-decoration : none; color : #000; }
</style></HEAD>


<body>
    <div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main" style="margin-left: 0px">			
		
		
		<div class="row">
			<div class="col-lg-12">
				<h1 class="page-header"><i class="fa fa-dashcube big-icon"></i> Dashboard</h1>
			</div>
		</div><!--/.row-->
		
		 
			<div class="row" style="margin-right: -234px;margin-left: -15px;">
				<div class="col-xs-12 col-md-6 col-lg-3">
				<div >
					<div >
						<div class="col-sm-3 col-lg-5 ">
							
						</div>
						<div class="col-sm-9 col-lg-7">
							<div ></div>
							<div ></div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-md-3 col-lg-3">
				<div class="panel panel-teal panel-widget">
					<div class="row no-padding">
						<div class="col-sm-3 col-lg-5 widget-left">
							<i class="glyphicon glyphicon-folder-open big-icon" aria-hidden="true"></i>
						</div>
						<div class="col-sm-9 col-lg-7 widget-right">
							<div class="large"><?php
                            $sql = "SELECT COUNT(distinct Product) as ids FROM RetrievePullData";
                            $result = mysqli_query($con,$sql);
                            
                            $rows = mysqli_fetch_assoc($result);
                                echo $rows['ids']; 
                            
                            ?></div>
							<div class="text-muted">Number of Products</div>
						</div>
					</div>
				</div>
			</div>
			<div class="col-xs-12 col-md-3 col-lg-3">
				<div class="panel panel-red panel-widget">
					<div class="row no-padding">
						<div class="col-sm-3 col-lg-5 widget-left">
							<i class="glyphicon glyphicon-tasks big-icon" aria-hidden="true"></i>
						</div>
						<div class="col-sm-9 col-lg-7 widget-right">
							<div class="large"><?php
                            $sql = "SELECT COUNT(PullUrl) as ids FROM RetrievePullData";
                            $result = mysqli_query($con,$sql);
                           
                            $rows = mysqli_fetch_assoc($result);
                                 
                            
                            echo $rows['ids'];
                            ?></div>
							<div class="text-muted">No Of Open Pull Requests</div>
						</div>
					</div>
				</div>
			</div>

				<div class="col-xs-12 col-md-3 col-lg-3">
				<div class="panel panel-orange panel-widget">
					<div class="row no-padding">
						<div class="col-sm-3 col-lg-5 widget-left">
							<i class="fa fa-users big-icon" aria-hidden="true"></i>
						</div>
						<div class="col-sm-9 col-lg-7 widget-right">
							<div class="large"><?php
                            $sql = "SELECT COUNT(distinct GitId) as ids FROM `RetrievePullData`";
                            $result = mysqli_query($con,$sql);
                            
                            $rows = mysqli_fetch_assoc($result);
                                echo $rows['ids']; 
                           
                            ?></div>
							<div class="text-muted">PR created by</div>
						</div>
					</div>
				</div>
			</div> 
			<div class="col-lg-12" style="width: 105%"><center><?php include('hours.php') ?></center></div>

			<div><div class="col-md-12" align="right"><br><br><?php include("index2.php") ?></div></div>
		</div><!--/.row-->




		
		 <div class="col-lg-12" style="width: 120%" >
			<div class="col-lg-12">
				<div class="panel panel-default">
					<div class="panel-heading"><i class="fa fa-edit"></i> Analysis on open pull requests</div>
					<div class="panel-body">
								<div class="table-responsive">
                        <table class="table table-bordered " >
                         <thead style="border-bottom: 3px solid #c0c0c0;">
                          <tr>
                          <th class="active">Product</th>
                          <th class="active">Repository Name</th>
                          <th class="active">Repository URL</th> 
                          <th class="active">Git_ID</th> 
                          <th class="active">Pull_url</th> 
                          <th class="active">Hour(s)</th>
                          <th class="active">Day(s)</th>
                          <th class="active">Month(s)</th>
                          <th class="active">Year(s)</th>

                          </tr>
                        </thead>
                        <tbody >
                       <?php

                         $sql = "select * from RetrievePullData order by Days desc"; 
                        $query =  mysqli_query($con,$sql) or die(mysqli_error($con));
                        while ($row = mysqli_fetch_array($query)) {
                            echo "<tr>";
                            echo "<td>" . $row['Product'] . "</td>";
                            echo "<td>" . $row['RepoName'] . "</td>";
                            echo "<td><a href=" . $row['Repourl'] . ">" . $row['Repourl'] . "</a></td>";
                            echo "<td>" . $row['GitId'] . "</td>";
                            echo "<td><a href=" . $row['PullUrl'] . ">" . $row['PullUrl'] . "</a></td>";
                            echo "<td>" . number_format($row['Hours']) . "</td>";
                            echo "<td>" . number_format($row['Days']) . "</td>";
                            echo "<td>" . $row['Months'] . "</td>";
                            echo "<td>" . $row['Years'] . "</td>";
                            echo "</tr>"; 
                        }

                        ?>
                        </tbody>
                          </table>
					</div>
					</div>
				</div>
			</div>
		</div> <!--/.row						
	</div>	<!--/.main-->

</body>
